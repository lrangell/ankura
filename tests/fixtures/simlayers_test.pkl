module simlayers_test

import "karabiner.pkl" as karabiner
import "helpers.pkl" as helpers

// Test simultaneous key layers (d-mode, f-mode)
simpleConfig: karabiner.SimpleConfig = new {
  complex_modifications = new karabiner.ComplexModifications {
    parameters = new karabiner.ComplexModificationParameters {
      `basic.simultaneous_threshold_milliseconds` = 200
    }
    
    rules = List(
      // D-mode for yabai window management
      helpers.simlayer("d", new Mapping {
        ["h"] = helpers.Keys.left_arrow
        ["j"] = helpers.Keys.down_arrow
        ["k"] = helpers.Keys.up_arrow
        ["l"] = helpers.Keys.right_arrow
      }, null),
      
      // F-mode for navigation
      helpers.simlayer("f", new Mapping {
        ["h"] = helpers.Keys.left_arrow
        ["j"] = helpers.Keys.down_arrow
        ["k"] = helpers.Keys.up_arrow
        ["l"] = helpers.Keys.right_arrow
      }, null)
    )
  }
}

config: karabiner.Config = simpleConfig.toConfig()