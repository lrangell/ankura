module yabai_auto_test

import "modulepath:/karabiner.pkl" as karabiner
import "modulepath:/helpers.pkl" as helpers
import "modulepath:/yabai.pkl" as yabai

yabaiConfig: yabai.Yabai = new {
  cmdPath = "/opt/homebrew/bin/yabai"
  focusSpace = List("u", "i", "o", "p", "open_bracket", "close_bracket").map((key) -> new karabiner.ToEvent { key_code = key })
  focusSpaceTrigger = "spacebar"
  prevSpace = new karabiner.ToEvent { 
    key_code = "h"
    modifiers = List("command", "control", "option", "shift")
  }
  nextSpace = new karabiner.ToEvent { 
    key_code = "l"
    modifiers = List("command", "control", "option", "shift")
  }
  focusRecentWindow = new karabiner.ToEvent { 
    key_code = "n"
    modifiers = List("control")
  }
  focusRecentSpace = new karabiner.ToEvent { 
    key_code = "m"
    modifiers = List("control")
  }
}

simpleConfig: karabiner.SimpleConfig = new {
  complex_modifications = new karabiner.ComplexModifications {
    rules = yabaiConfig.generateRules()
  }
}

config: karabiner.Config = simpleConfig.toConfig()